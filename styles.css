:root{
    --gov-blue:#003366;--gov-accent:#0072ce;--gov-gray:#f6f8fb;
    /* Calendar colour palette: cohesive blues/greens with warm accents */
    --cal-anchor:#0f172a;        /* Dissolution / Vacancy (deep navy) */
    --cal-latest:#f59e0b;        /* Latest Return (Constitutional) (amber) */
    --cal-writ:#1d4ed8;          /* Return of Writ window (royal blue) */
    --cal-notice:#0f766e;        /* Public Notice of Election (teal) */
    --cal-nomination:#15803d;    /* Nomination (deep green) */
    --cal-pubnom:#4ade80;        /* Public Notice of Nomination (leaf green) */
    --cal-poll:#38bdf8;          /* Poll window (sky blue) */
    --cal-register:#4f46e5;      /* Register publication (indigo) */
    --cal-advance:#14b8a6;       /* Advance poll (seafoam) */
    --cal-overseas:#eab308;      /* Overseas registration (yellow) */
    --cal-issue-suggest:#fef3c7; /* Backâ€‘calculated issue suggestion (pale amber) */
  }
  *{box-sizing:border-box}
  body{font-family:Segoe UI,Arial,sans-serif;background:var(--gov-gray);margin:0;color:#222}
  header{background:var(--gov-blue);color:#fff;padding:14px 20px;border-bottom:4px solid var(--gov-accent)}
  .container{display:flex;max-width:1500px;margin:0 auto;gap:18px;padding:16px}
  .main{flex:3}
  .sidebar{flex:1;position:sticky;top:10px;height:fit-content}
  .tabs{display:flex;gap:8px;margin-bottom:10px}
  .tab{border:1px solid #cfd7e3;background:#fff;border-radius:6px;padding:8px 12px;cursor:pointer}
  .tab.active{background:var(--gov-blue);color:#fff;border-color:var(--gov-blue)}
  .controls{display:grid;grid-template-columns:repeat(2,1fr);gap:10px 18px;margin:8px 0}
  .field label{display:block;font-size:13px;margin-bottom:4px}
  input[type=date]{width:100%;padding:6px;border:1px solid #ccd5e1;border-radius:4px}
  .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:6px 0}
  .btn{background:var(--gov-blue);color:#fff;border:none;border-radius:4px;padding:8px 12px;cursor:pointer;font-size:13px}
  .btn.alt{background:#6b7280}
  .monthNav{margin-left:auto;display:flex;gap:8px;align-items:center}
  .title{min-width:180px;text-align:center;font-weight:700}
  .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px}
  .day-head{background:#eef3f7;font-weight:700;text-align:center;padding:4px;border:1px solid #d1d5db}
  .cell{min-height:96px;border:1px solid #e5e7eb;border-radius:4px;position:relative;background:#fff;cursor:pointer;isolation:isolate}
  .dateNum{position:absolute;top:2px;right:4px;font-size:12px;color:#333;z-index:3}
  .holiday{background:#f3f4f6;color:#999}
  .tagTop,.tagBottom{position:absolute;left:2px;right:2px;display:flex;flex-direction:column;gap:2px;z-index:4}
  .tagTop{top:16px;align-items:center}
  .tagBottom{bottom:2px;align-items:flex-start}
  .tag{font-size:10px;background:rgba(255,255,255,.92);padding:0 2px;border-radius:2px;font-weight:800;max-width:100%;white-space:normal;word-break:break-word}
  .paint{position:absolute;inset:0;border-radius:4px;opacity:.6;z-index:1}
  .hl-anchor{background:var(--cal-anchor)}
  .hl-register{background:var(--cal-register)}
  .hl-overseas{background:var(--cal-overseas)}
  .hl-latest{background:var(--cal-latest)}
  .hl-writ{background:var(--cal-writ)}
  .hl-notice{background:var(--cal-notice)}
  .hl-nomination{background:var(--cal-nomination)}
  .hl-pubnom{background:var(--cal-pubnom)}
  .hl-poll{background:var(--cal-poll)}
  .hl-advance{background:var(--cal-advance)}
  .hl-issue-suggest{background:var(--cal-issue-suggest);outline:2px dashed #b45309;outline-offset:-2px}
  .hl-issue-suggest{background:var(--cal-issue-suggest);outline:2px dashed #b45309;outline-offset:-2px}
  .tri{position:absolute;inset:0;z-index:1}{position:absolute;inset:0;z-index:1}
  .tri.tl{clip-path:polygon(0 0,100% 0,0 100%)}
  .tri.br{clip-path:polygon(100% 0,100% 100%,0 100%)}
  .picked-issue{box-shadow:inset 0 0 0 3px #a07900}
  .picked-return{box-shadow:inset 0 0 0 3px var(--brown-b)}
  .picked-notice{box-shadow:inset 0 0 0 3px var(--blue-b)}
  .picked-nomination{box-shadow:inset 0 0 0 3px #b65763}
  .picked-pubNom{box-shadow:inset 0 0 0 3px #2c8c52}
  .picked-poll{box-shadow:inset 0 0 0 3px var(--teal-b)}
  .numTopRight,.numBottomRight{position:absolute;right:4px;display:flex;flex-direction:column;gap:1px;z-index:5}
  .numTopRight{top:26px}
  .numBottomRight{bottom:18px}
  .chip{font-size:10px;padding:0 3px;border-radius:2px;border:1px solid rgba(0,0,0,.2);background:rgba(255,255,255,.9);font-weight:700}
  .chip.writ{background:rgba(196,154,108,.35)}
  .chip.notice{background:rgba(147,197,253,.35)}
  .chip.nomination{background:rgba(253,164,175,.35)}
  .chip.pubNom{background:rgba(134,239,172,.35)}
  .chip.poll{background:rgba(20,184,166,.35)}
  .chip.issueSuggest{background:rgba(250,204,21,.35)}
  .badge-oor{position:absolute;left:2px;top:2px;background:#fff0f0;color:#a60000;border:1px solid #d22;border-radius:2px;font-size:9px;font-weight:800;padding:0 3px;z-index:6}
  .panel{background:#fff;border:1px solid #d9e2ec;border-radius:6px;padding:12px;margin-bottom:12px}
  .panel h3{margin:0 0 6px;color:var(--gov-blue);font-size:14px}
  .err{color:#a00;min-height:18px}
  .legend{display:grid;grid-template-columns:repeat(3,1fr);gap:6px 12px;font-size:11px}
  .legend-item{display:flex;align-items:center;gap:6px}
  .legend-color{width:14px;height:10px;border-radius:2px;border:1px solid #cbd5e1}
  .monthBlock{background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:10px;margin:10px 0}
  #summary b{font-weight:700;color:var(--gov-blue)}
  @media print{
    *{-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important;color-adjust:exact!important}
    header,.tabs,.toolbar,.controls{display:none!important}
    .container{display:block}
    .sidebar{display:none!important}
    .monthBlock{page-break-after:always;break-after:page}
    .monthBlock:last-child{page-break-after:auto;break-after:auto}
  }


/* ===== Mobile responsiveness + PWA friendly tweaks ===== */
html, body { height: 100%; }
body { -webkit-tap-highlight-color: transparent; }

.btn { padding: 10px 14px; font-size: 14px; }
input[type=date] { padding: 10px; font-size: 16px; } /* iOS zoom prevention */

.container { align-items: flex-start; }

@media (max-width: 980px){
  .container{ flex-direction: column; }
  .sidebar{ position: static; width: 100%; }
  .main{ width: 100%; }
  header h1{ font-size: 18px; margin: 0; }
  .controls{ grid-template-columns: 1fr; gap: 10px; }
  .toolbar{ gap: 10px; }
  .monthNav{ margin-left: 0; width: 100%; justify-content: space-between; }
  .title{ min-width: 0; flex: 1; }
  .grid{ gap: 4px; }
  .cell{ min-height: 74px; }
  .tag{ font-size: 9.5px; }
  .day-head{ padding: 6px 0; }
}

@media (max-width: 420px){
  .cell{ min-height: 68px; }
  .dateNum{ font-size: 11px; }
  .chip{ font-size: 9px; }
}

/* Make the Key Dates panel collapsible feel tighter on mobile */
.panel{ padding: 10px; }

